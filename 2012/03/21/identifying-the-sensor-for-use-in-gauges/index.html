<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Identifying the sensor for use in Gauges - travisgeis.com</title><link rel="icon" href="/img/favicon.png"><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous"><link href="https://fonts.googleapis.com/css?family=Lato|Permanent+Marker" rel="stylesheet"><link rel="stylesheet" href="/vendor/font-awesome-4.7.0/css/font-awesome.min.css"><link rel="stylesheet" href="/css/boxy.css"></head><body><nav id="menu" class="nav nav-pills flex-column flex-sm-row"><a href="/" class="flex-sm-fill text-sm-center nav-link"><i aria-hidden="true" class="fa inline-icon fa-home"></i>travisgeis.com</a><a href="/contact" class="flex-sm-fill text-sm-center nav-link"><i aria-hidden="true" class="fa inline-icon fa-comments"></i>Contact</a><a href="/archives" class="flex-sm-fill text-sm-center nav-link"><i aria-hidden="true" class="fa inline-icon fa-archive"></i>Archives</a></nav><div id="content" class="container"><div id="titles-container"><div id="titles"><h1>Identifying the sensor for use in Gauges</h1><h3 class="date">21 March, 2012</h3></div></div><article id="post"><p>I am prototyping the software for Gauges from the Ubuntu partition on my white
MacBook from 2007. One of the early tasks was finding the name of the
temperature sensor corresponding to the main CPU. I installed a cool utility
called Psensor that charts sensor outputs over time. Then I opened every
application I could think of, and waited for the CPU temperature to increase.
Psensor clearly showed that the sensor named “TC0D” corresponded to the CPU
temperature. That acronym may mean “Temp-CPU 0 Die”, but I don’t know for sure.</p>
<img src="/uploads/2012/03/body-Screenshot-at-2012-03-13-130526.png" alt="Psensors Screenshot">
<p>Once I knew the sensor name, I ran “sensors” in a terminal and found that my
computer uses a chip called “applesmc-isa-300”:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">travis@travis-ubuntu:~/Projects/Gauges$ sensors</div><div class="line">applesmc-isa-0300</div><div class="line">Adapter: ISA adapter</div><div class="line">Exhaust  :   3074 RPM  (min = 1800 RPM)</div><div class="line">TB0T:         +32.5°C</div><div class="line">TC0D:         +57.2°C</div><div class="line">TC0P:         +55.0°C</div><div class="line">TM0P:         +58.0°C</div><div class="line">TN0P:         +54.0°C</div><div class="line">TTF0:         +55.0°C</div><div class="line">TW0P:         +74.0°C</div><div class="line">Th0H:         +54.8°C</div><div class="line">Th0S:         +54.5°C</div><div class="line">Th1H:         +54.2°C</div></pre></td></tr></table></figure>
<p>Every Linux sensor has a corresponding pseudo-file for reading programmatically.
I dug through online references of various sorts until I found the directory of
my chipset, called ‘/sys/bus/platform/devices/applesmc.768/‘. Once I had the
directory, I ran sensors again with the -u flag set for “debugging” output:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">travis@travis-ubuntu:~/Projects/Gauges$ sensors -u</div><div class="line">applesmc-isa-0300</div><div class="line">Adapter: ISA adapter</div><div class="line">Exhaust  :</div><div class="line">  fan1_input: 2309.000</div><div class="line">  fan1_min: 1800.000</div><div class="line">TB0T:</div><div class="line">  temp1_input: 32.500</div><div class="line">TC0D:</div><div class="line">  temp2_input: 58.250</div><div class="line">TC0P:</div><div class="line">  temp3_input: 56.000</div><div class="line">TM0P:</div><div class="line">  temp4_input: 57.750</div><div class="line">TN0P:</div><div class="line">  temp5_input: 54.500</div><div class="line">TTF0:</div><div class="line">  temp6_input: 56.250</div><div class="line">TW0P:</div><div class="line">  temp7_input: 74.000</div><div class="line">Th0H:</div><div class="line">  temp8_input: 56.000</div><div class="line">Th0S:</div><div class="line">  temp9_input: 55.750</div><div class="line">Th1H:</div><div class="line">  temp10_input: 55.500</div></pre></td></tr></table></figure>
<p>The verbose output told me that the sensor I want, TC0D, is also called
“temp2_input”. Looking in the <code>/sys/bus/platform/devices/applesmc.768/</code>
directory, I found a pseudo-file called “temp2_input”. Perfect!</p>
<p>When my Python script reads
<code>/sys/bus/platform/devices/applesmc.768/temp2_input</code>, it gets a string something
like “59500” corresponding to 59.5°C. My script converts the number to a float,
divides by 1000, then rounds off to the nearest integer so I can fit the number
in one byte. Awesome!</p>
</article><nav id="pagination"><ul class="pagination justify-content-center"><li class="page-item"><a href="../../../04/17/anodizing-aluminium-at-home/" class="page-link">&larr; Prev</a></li><l class="page-item"><a href="../../20/connecting-to-gauges-with-bluetooth/" class="page-link">Next &rarr;</a></l></ul></nav></div><script src="/js/boxy.js"></script></body></html>